; Test for the CMPXCHG instruction


	;32 bit
	LOAD32	R0,	@1024
	LOAD32	R1,	@0
	LOAD32 	R2,	@42
	LOAD32 	R3,	@10
	STOREID	R0,	R1,	0
	CMPXCHG	R0,	R1,	R2
	FAILNZ	0x01
	LOAD32	R4,	@0
	CMP	R4,	R1
	FAILNZ	0x02
	LOADID	R5,	R0,	0
	CMP	R2,	R5
	FAILNZ	0x03
	
	
	LOAD32	R0,	@1024
	LOAD32	R1,	@0
	LOAD32 	R2,	@42
	LOAD32 	R3,	@10
	STOREID	R0,	R1,	0
	
	CMPXCHG	R0,	R3,	R2
	FAILIZ	0x04
	
	LOAD32	R4,	@0
	CMP	R4,	R3
	FAILNZ	0x05
	
	LOADID	R5,	R0,	0
	LOAD32	R4,	@0
	CMP	R4,	R5
	FAILNZ	0x06
	
	STOP